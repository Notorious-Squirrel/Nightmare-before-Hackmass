<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NIGHTMARE BEFORE HAKMASS</title>
<meta name="description" content="Ghoststrats-style CTF stage gateway ‚Äî festive North Pole edition." />

<style>
  :root{
    --glass: rgba(255,255,255,0.12);
    --glass-strong: rgba(255,255,255,0.22);
    --text: #eaf7ff;
    --accent: #00f0c8;
    --accent2: #b15cff;
  }

  html, body { height:100%; }
  body{
    margin:0;
    height:100%;
    color:var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    line-height:1.25;
    background:
      radial-gradient(1200px 800px at 50% 20%, rgba(0,0,0,0.35), rgba(0,0,0,0.85)),
      url("Background.jpeg") center/cover no-repeat fixed;
    background-color:#0b0f16;
    overflow:hidden;
  }

  /* snowfall */
  .snow, .snow:before, .snow:after{
    position:fixed; inset:0; pointer-events:none; content:"";
    background-image:
      radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.7) 50%, transparent 52%),
      radial-gradient(2px 2px at 80% 20%, rgba(255,255,255,.6) 50%, transparent 52%),
      radial-gradient(3px 3px at 50% 80%, rgba(255,255,255,.8) 50%, transparent 52%),
      radial-gradient(1.5px 1.5px at 70% 60%, rgba(255,255,255,.5) 50%, transparent 52%),
      radial-gradient(2px 2px at 30% 70%, rgba(255,255,255,.55) 50%, transparent 52%);
    animation: snow 22s linear infinite;
  }
  .snow:before{ animation-duration: 32s; opacity:.6; }
  .snow:after { animation-duration: 45s; opacity:.35; }
  @keyframes snow{
    from{ background-position: 0 -100vh, 0 -100vh, 0 -100vh, 0 -100vh, 0 -100vh; }
    to  { background-position: 0 100vh,  0  80vh,  0 120vh, 0  90vh,  0 140vh; }
  }

  .wrap{
    position:fixed; inset:0;
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    gap:20px;
  }

  .candy{
    border: 10px solid transparent;
    border-image: repeating-linear-gradient(45deg, #ff0022 0 12px, #ffffff 12px 24px) 12;
    border-radius: 18px;
    background: linear-gradient(to bottom right, var(--glass-strong), rgba(0,0,0,.25));
    backdrop-filter: blur(8px) saturate(140%);
    -webkit-backdrop-filter: blur(8px) saturate(140%);
    box-shadow: 0 10px 30px rgba(0,0,0,.4), 0 0 40px rgba(177,92,255,.25) inset;
  }

  .title{
    text-align:center;
    padding:16px;
  }
  .title h1{
    margin:0;
    font-size:clamp(28px, 5vw, 52px);
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    -webkit-background-clip:text;
    background-clip:text;
    color:transparent;
    text-shadow:0 0 16px rgba(0,240,200,.55), 0 0 32px rgba(177,92,255,.45);
  }

  .start-btn{
    padding:20px 40px;
    font-size:clamp(20px,4vw,28px);
    font-weight:bold;
    border:none;
    border-radius:14px;
    cursor:pointer;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    color:#071013;
    box-shadow:0 8px 20px rgba(0,0,0,.35);
  }
  .start-btn:active{ transform:translateY(1px) scale(.98); }

  .board{
    display:grid;
    grid-template-columns: repeat(3,1fr);
    grid-template-rows: repeat(3,1fr);
    gap:18px;
    width:min(90vmin, 1100px);
    aspect-ratio:1/1;
  }
  .stage{ padding:16px; display:none; }
  .stage h2{ margin:0 0 8px 0; }
  .msg{ margin-top:8px; font-weight:bold; }
  .msg.ok{ color:#9fffe2; }
  .msg.err{ color:#ffb3c0; }

  .top-left{grid-area:1/1;}
  .top-right{grid-area:1/3;}
  .center{grid-area:2/2;}
  .bottom-left{grid-area:3/1;}
  .bottom-right{grid-area:3/3;}

  .codebar{ display:flex; gap:10px; flex-wrap:wrap; }
  .codebar input{ flex:1 1 160px; padding:10px; border-radius:10px; }
  .codebar button{
    padding:10px 14px; border:none; border-radius:10px; cursor:pointer;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    font-weight:bold;
  }
</style>
</head>
<body>
<div class="snow"></div>
<main class="wrap">
  <header class="title candy">
    <h1>Jack‚Äôs Back, Christmas Attack</h1>
    <p>Save Christmas by unlocking each stage in order.</p>
  </header>

  <!-- Start button -->
  <button class="start-btn" onclick="startGame()">üéÑ Save Christmas üéÑ</button>

  <!-- Stages board -->
  <section class="board">
    <article class="stage candy top-left" data-stage="1" data-code="Flag{S1-EXAMPLE}">
      <h2>Stage 1 ‚Äî Frostbyte Recon</h2>
      <p>Find the stray creds and enter the flag.</p>
      <div class="codebar">
        <input type="text" placeholder="Stage 1 code‚Ä¶">
        <button onclick="check(this)">Unlock</button>
      </div>
      <div class="msg"></div>
    </article>

    <article class="stage candy top-right" data-stage="2" data-code="Flag{S2-EXAMPLE}">
      <h2>Stage 2 ‚Äî Sleigh Stack Overflow</h2>
      <p>Patch the flight deck telemetry.</p>
      <div class="codebar">
        <input type="text" placeholder="Stage 2 code‚Ä¶">
        <button onclick="check(this)">Unlock</button>
      </div>
      <div class="msg"></div>
    </article>

    <article class="stage candy center" data-stage="3" data-code="Flag{S3-EXAMPLE}">
      <h2>Stage 3 ‚Äî Elf Control</h2>
      <p>Pivot through Elf Control.</p>
      <div class="codebar">
        <input type="text" placeholder="Stage 3 code‚Ä¶">
        <button onclick="check(this)">Unlock</button>
      </div>
      <div class="msg"></div>
    </article>

    <article class="stage candy bottom-left" data-stage="4" data-code="Flag{S4-EXAMPLE}">
      <h2>Stage 4 ‚Äî Candy Cane Cipher</h2>
      <p>Unwrap the stripes to reveal the secret.</p>
      <div class="codebar">
        <input type="text" placeholder="Stage 4 code‚Ä¶">
        <button onclick="check(this)">Unlock</button>
      </div>
      <div class="msg"></div>
    </article>

    <article class="stage candy bottom-right" data-stage="5" data-code="Flag{S5-OMEGA}" data-url="Nexus5.html">
      <h2>Final ‚Äî Jack‚Äôs Backdoor</h2>
      <p>Enter the ultimate flag to breach Santa‚Äôs Workshop.</p>
      <div class="codebar">
        <input type="text" placeholder="Final code‚Ä¶">
        <button onclick="check(this)">Unlock</button>
      </div>
      <div class="msg"></div>
    </article>
  </section>
</main>

<script>
function startGame(){
  document.querySelector(".start-btn").style.display="none";
  document.querySelector('.stage[data-stage="1"]').style.display="block";
}

function check(btn){
  const card = btn.closest('.stage');
  const input = card.querySelector('input');
  const msg = card.querySelector('.msg');
  const want = card.dataset.code.trim();
  const got  = (input.value || "").trim();

  if(!got){ msg.textContent="Enter a code."; msg.className="msg err"; return; }

  if(got === want){
    msg.textContent="‚úÖ Correct!";
    msg.className="msg ok";

    // reveal next stage
    const stageNum = parseInt(card.dataset.stage,10);
    const next = document.querySelector(`.stage[data-stage="${stageNum+1}"]`);
    if(next){ next.style.display="block"; }

    // redirect if final has url
    if(card.dataset.url){
      setTimeout(()=>location.href=card.dataset.url,800);
    }
  }else{
    msg.textContent="‚ùå Wrong code.";
    msg.className="msg err";
  }
}
</script>
</body>
</html>